<html lang="en">
<head>
<title>Bash POSIX Mode - Bash Reference Manual</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Bash Reference Manual">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Bash-Features.html#Bash-Features" title="Bash Features">
<link rel="prev" href="The-Restricted-Shell.html#The-Restricted-Shell" title="The Restricted Shell">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This text is a brief description of the features that are present in
the Bash shell (version 4.1, 23 December 2009).

This is Edition 4.1, last updated 23 December 2009,
of `The GNU Bash Reference Manual',
for `Bash', Version 4.1.

Copyright (C) 1988--2009 Free Software Foundation, Inc.

Permission is granted to make and distribute verbatim copies of
this manual provided the copyright notice and this permission notice
are preserved on all copies.

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; with no Invariant Sections, with the Front-Cover texts
     being ``A GNU Manual'', and with the Back-Cover Texts as in (a)
     below.  A copy of the license is included in the section entitled
     ``GNU Free Documentation License''.

     (a) The FSF's Back-Cover Text is: You are free to copy and modify
     this GNU manual.  Buying copies from GNU Press supports the FSF in
     developing GNU and promoting software freedom.''

   -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Bash-POSIX-Mode"></a>
<p>
Previous:&nbsp;<a rel="previous" accesskey="p" href="The-Restricted-Shell.html#The-Restricted-Shell">The Restricted Shell</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Bash-Features.html#Bash-Features">Bash Features</a>
<hr>
</div>

<h3 class="section">6.11 Bash POSIX Mode</h3>

<p><a name="index-POSIX-Mode-259"></a>
Starting Bash with the <samp><span class="option">--posix</span></samp> command-line option or executing
&lsquo;<samp><span class="samp">set -o posix</span></samp>&rsquo; while Bash is running will cause Bash to conform more
closely to the <span class="sc">posix</span> standard by changing the behavior to
match that specified by <span class="sc">posix</span> in areas where the Bash default differs.

   <p>When invoked as <code>sh</code>, Bash enters <span class="sc">posix</span> mode after reading the
startup files.

   <p>The following list is what's changed when `<span class="sc">posix</span> mode' is in effect:

     <ol type=1 start=1>
<li>When a command in the hash table no longer exists, Bash will re-search
<samp><span class="env">$PATH</span></samp> to find the new location.  This is also available with
&lsquo;<samp><span class="samp">shopt -s checkhash</span></samp>&rsquo;.

     <li>The message printed by the job control code and builtins when a job
exits with a non-zero status is `Done(status)'.

     <li>The message printed by the job control code and builtins when a job
is stopped is `Stopped(<var>signame</var>)', where <var>signame</var> is, for
example, <code>SIGTSTP</code>.

     <li>The <code>bg</code> builtin uses the required format to describe each job placed
in the background, which does not include an indication of whether the job
is the current or previous job.

     <li>Reserved words appearing in a context where reserved words are recognized
do not undergo alias expansion.

     <li>The <span class="sc">posix</span> <samp><span class="env">PS1</span></samp> and <samp><span class="env">PS2</span></samp> expansions of &lsquo;<samp><span class="samp">!</span></samp>&rsquo; to
the history number and &lsquo;<samp><span class="samp">!!</span></samp>&rsquo; to &lsquo;<samp><span class="samp">!</span></samp>&rsquo; are enabled,
and parameter expansion is performed on the values of <samp><span class="env">PS1</span></samp> and
<samp><span class="env">PS2</span></samp> regardless of the setting of the <code>promptvars</code> option.

     <li>The <span class="sc">posix</span> startup files are executed (<samp><span class="env">$ENV</span></samp>) rather than
the normal Bash files.

     <li>Tilde expansion is only performed on assignments preceding a command
name, rather than on all assignment statements on the line.

     <li>The default history file is <samp><span class="file">~/.sh_history</span></samp> (this is the
default value of <samp><span class="env">$HISTFILE</span></samp>).

     <li>The output of &lsquo;<samp><span class="samp">kill -l</span></samp>&rsquo; prints all the signal names on a single line,
separated by spaces, without the &lsquo;<samp><span class="samp">SIG</span></samp>&rsquo; prefix.

     <li>The <code>kill</code> builtin does not accept signal names with a &lsquo;<samp><span class="samp">SIG</span></samp>&rsquo;
prefix.

     <li>Non-interactive shells exit if <var>filename</var> in <code>.</code> <var>filename</var>
is not found.

     <li>Non-interactive shells exit if a syntax error in an arithmetic expansion
results in an invalid expression.

     <li>Redirection operators do not perform filename expansion on the word
in the redirection unless the shell is interactive.

     <li>Redirection operators do not perform word splitting on the word in the
redirection.

     <li>Function names must be valid shell <code>name</code>s.  That is, they may not
contain characters other than letters, digits, and underscores, and
may not start with a digit.  Declaring a function with an invalid name
causes a fatal syntax error in non-interactive shells.

     <li><span class="sc">posix</span> special builtins are found before shell functions
during command lookup.

     <li>If a <span class="sc">posix</span> special builtin returns an error status, a
non-interactive shell exits.  The fatal errors are those listed in
the POSIX standard, and include things like passing incorrect options,
redirection errors, variable assignment errors for assignments preceding
the command name, and so on.

     <li>If <samp><span class="env">CDPATH</span></samp> is set, the <code>cd</code> builtin will not implicitly
append the current directory to it.  This means that <code>cd</code> will
fail if no valid directory name can be constructed from
any of the entries in <samp><span class="env">$CDPATH</span></samp>, even if the a directory with
the same name as the name given as an argument to <code>cd</code> exists
in the current directory.

     <li>A non-interactive shell exits with an error status if a variable
assignment error occurs when no command name follows the assignment
statements. 
A variable assignment error occurs, for example, when trying to assign
a value to a readonly variable.

     <li>A non-interactive shell exits with an error status if the iteration
variable in a <code>for</code> statement or the selection variable in a
<code>select</code> statement is a readonly variable.

     <li>Process substitution is not available.

     <li>Assignment statements preceding <span class="sc">posix</span> special builtins
persist in the shell environment after the builtin completes.

     <li>Assignment statements preceding shell function calls persist in the
shell environment after the function returns, as if a <span class="sc">posix</span>
special builtin command had been executed.

     <li>The <code>export</code> and <code>readonly</code> builtin commands display their
output in the format required by <span class="sc">posix</span>.

     <li>The <code>trap</code> builtin displays signal names without the leading
<code>SIG</code>.

     <li>The <code>trap</code> builtin doesn't check the first argument for a possible
signal specification and revert the signal handling to the original
disposition if it is, unless that argument consists solely of digits and
is a valid signal number.  If users want to reset the handler for a given
signal to the original disposition, they should use &lsquo;<samp><span class="samp">-</span></samp>&rsquo; as the
first argument.

     <li>The <code>.</code> and <code>source</code> builtins do not search the current directory
for the filename argument if it is not found by searching <samp><span class="env">PATH</span></samp>.

     <li>Subshells spawned to execute command substitutions inherit the value of
the <samp><span class="option">-e</span></samp> option from the parent shell.  When not in <span class="sc">posix</span> mode,
Bash clears the <samp><span class="option">-e</span></samp> option in such subshells.

     <li>Alias expansion is always enabled, even in non-interactive shells.

     <li>When the <code>alias</code> builtin displays alias definitions, it does not
display them with a leading &lsquo;<samp><span class="samp">alias </span></samp>&rsquo; unless the <samp><span class="option">-p</span></samp> option
is supplied.

     <li>When the <code>set</code> builtin is invoked without options, it does not display
shell function names and definitions.

     <li>When the <code>set</code> builtin is invoked without options, it displays
variable values without quotes, unless they contain shell metacharacters,
even if the result contains nonprinting characters.

     <li>When the <code>cd</code> builtin is invoked in <var>logical</var> mode, and the pathname
constructed from <code>$PWD</code> and the directory name supplied as an argument
does not refer to an existing directory, <code>cd</code> will fail instead of
falling back to <var>physical</var> mode.

     <li>When the <code>pwd</code> builtin is supplied the <samp><span class="option">-P</span></samp> option, it resets
<code>$PWD</code> to a pathname containing no symlinks.

     <li>The <code>pwd</code> builtin verifies that the value it prints is the same as the
current directory, even if it is not asked to check the file system with the
<samp><span class="option">-P</span></samp> option.

     <li>When listing the history, the <code>fc</code> builtin does not include an
indication of whether or not a history entry has been modified.

     <li>The default editor used by <code>fc</code> is <code>ed</code>.

     <li>The <code>type</code> and <code>command</code> builtins will not report a non-executable
file as having been found, though the shell will attempt to execute such a
file if it is the only so-named file found in <code>$PATH</code>.

     <li>The <code>vi</code> editing mode will invoke the <code>vi</code> editor directly when
the &lsquo;<samp><span class="samp">v</span></samp>&rsquo; command is run, instead of checking <code>$VISUAL</code> and
<code>$EDITOR</code>.

     <li>When the <code>xpg_echo</code> option is enabled, Bash does not attempt to interpret
any arguments to <code>echo</code> as options.  Each argument is displayed, after
escape characters are converted.

     <li>The <code>ulimit</code> builtin uses a block size of 512 bytes for the <samp><span class="option">-c</span></samp>
and <samp><span class="option">-f</span></samp> options.

     <li>The arrival of <code>SIGCHLD</code>  when a trap is set on <code>SIGCHLD</code> does
not interrupt the <code>wait</code> builtin and cause it to return immediately. 
The trap command is run once for each child that exits.

        </ol>

   <p>There is other <span class="sc">posix</span> behavior that Bash does not implement by
default even when in <span class="sc">posix</span> mode. 
Specifically:

     <ol type=1 start=1>

     <li>The <code>fc</code> builtin checks <code>$EDITOR</code> as a program to edit history
entries if <code>FCEDIT</code> is unset, rather than defaulting directly to
<code>ed</code>.  <code>fc</code> uses <code>ed</code> if <code>EDITOR</code> is unset.

     <li>As noted above, Bash requires the <code>xpg_echo</code> option to be enabled for
the <code>echo</code> builtin to be fully conformant.

        </ol>

   <p>Bash can be configured to be <span class="sc">posix</span>-conformant by default, by specifying
the <samp><span class="option">--enable-strict-posix-default</span></samp> to <code>configure</code> when building
(see <a href="Optional-Features.html#Optional-Features">Optional Features</a>).

   </body></html>

