<html lang="en">
<head>
<title>Job Control Basics - Bash Reference Manual</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Bash Reference Manual">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Job-Control.html#Job-Control" title="Job Control">
<link rel="next" href="Job-Control-Builtins.html#Job-Control-Builtins" title="Job Control Builtins">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This text is a brief description of the features that are present in
the Bash shell (version 4.1, 23 December 2009).

This is Edition 4.1, last updated 23 December 2009,
of `The GNU Bash Reference Manual',
for `Bash', Version 4.1.

Copyright (C) 1988--2009 Free Software Foundation, Inc.

Permission is granted to make and distribute verbatim copies of
this manual provided the copyright notice and this permission notice
are preserved on all copies.

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; with no Invariant Sections, with the Front-Cover texts
     being ``A GNU Manual'', and with the Back-Cover Texts as in (a)
     below.  A copy of the license is included in the section entitled
     ``GNU Free Documentation License''.

     (a) The FSF's Back-Cover Text is: You are free to copy and modify
     this GNU manual.  Buying copies from GNU Press supports the FSF in
     developing GNU and promoting software freedom.''

   -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Job-Control-Basics"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Job-Control-Builtins.html#Job-Control-Builtins">Job Control Builtins</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Job-Control.html#Job-Control">Job Control</a>
<hr>
</div>

<h3 class="section">7.1 Job Control Basics</h3>

<p><a name="index-job-control-260"></a><a name="index-foreground-261"></a><a name="index-background-262"></a><a name="index-suspending-jobs-263"></a>
Job control
refers to the ability to selectively stop (suspend)
the execution of processes and continue (resume)
their execution at a later point.  A user typically employs
this facility via an interactive interface supplied jointly
by the operating system kernel's terminal driver and Bash.

   <p>The shell associates a <var>job</var> with each pipeline.  It keeps a
table of currently executing jobs, which may be listed with the
<code>jobs</code> command.  When Bash starts a job
asynchronously, it prints a line that looks
like:
<pre class="example">     [1] 25647
</pre>
   <p class="noindent">indicating that this job is job number 1 and that the process <span class="sc">id</span>
of the last process in the pipeline associated with this job is
25647.  All of the processes in a single pipeline are members of
the same job.  Bash uses the <var>job</var> abstraction as the
basis for job control.

   <p>To facilitate the implementation of the user interface to job
control, the operating system maintains the notion of a current terminal
process group <span class="sc">id</span>.  Members of this process group (processes whose
process group <span class="sc">id</span> is equal to the current terminal process group
<span class="sc">id</span>) receive keyboard-generated signals such as <code>SIGINT</code>. 
These processes are said to be in the foreground.  Background
processes are those whose process group <span class="sc">id</span> differs from the
terminal's; such processes are immune to keyboard-generated
signals.  Only foreground processes are allowed to read from or, if
the user so specifies with <code>stty tostop</code>, write to the terminal. 
Background processes which attempt to
read from (write to when <code>stty tostop</code> is in effect) the
terminal are sent a <code>SIGTTIN</code> (<code>SIGTTOU</code>)
signal by the kernel's terminal driver,
which, unless caught, suspends the process.

   <p>If the operating system on which Bash is running supports
job control, Bash contains facilities to use it.  Typing the
<var>suspend</var> character (typically &lsquo;<samp><span class="samp">^Z</span></samp>&rsquo;, Control-Z) while a
process is running causes that process to be stopped and returns
control to Bash.  Typing the <var>delayed suspend</var> character
(typically &lsquo;<samp><span class="samp">^Y</span></samp>&rsquo;, Control-Y) causes the process to be stopped
when it attempts to read input from the terminal, and control to
be returned to Bash.  The user then manipulates the state of
this job, using the <code>bg</code> command to continue it in the
background, the <code>fg</code> command to continue it in the
foreground, or the <code>kill</code> command to kill it.  A &lsquo;<samp><span class="samp">^Z</span></samp>&rsquo;
takes effect immediately, and has the additional side effect of
causing pending output and typeahead to be discarded.

   <p>There are a number of ways to refer to a job in the shell.  The
character &lsquo;<samp><span class="samp">%</span></samp>&rsquo; introduces a job specification (<var>jobspec</var>).

   <p>Job number <code>n</code> may be referred to as &lsquo;<samp><span class="samp">%n</span></samp>&rsquo;. 
The symbols &lsquo;<samp><span class="samp">%%</span></samp>&rsquo; and  &lsquo;<samp><span class="samp">%+</span></samp>&rsquo; refer to the shell's notion of the
current job, which is the last job stopped while it was in the foreground
or started in the background. 
A single &lsquo;<samp><span class="samp">%</span></samp>&rsquo; (with no accompanying job specification) also refers
to the current job. 
The previous job may be referenced using &lsquo;<samp><span class="samp">%-</span></samp>&rsquo;. 
If there is only a single job, &lsquo;<samp><span class="samp">%+</span></samp>&rsquo; and &lsquo;<samp><span class="samp">%-</span></samp>&rsquo; can both be used
to refer to that job. 
In output pertaining to jobs (e.g., the output of the <code>jobs</code>
command), the current job is always flagged with a &lsquo;<samp><span class="samp">+</span></samp>&rsquo;, and the
previous job with a &lsquo;<samp><span class="samp">-</span></samp>&rsquo;.

   <p>A job may also be referred to
using a prefix of the name used to start it, or using a substring
that appears in its command line.  For example, &lsquo;<samp><span class="samp">%ce</span></samp>&rsquo; refers
to a stopped <code>ce</code> job. Using &lsquo;<samp><span class="samp">%?ce</span></samp>&rsquo;, on the
other hand, refers to any job containing the string &lsquo;<samp><span class="samp">ce</span></samp>&rsquo; in
its command line.  If the prefix or substring matches more than one job,
Bash reports an error.

   <p>Simply naming a job can be used to bring it into the foreground:
&lsquo;<samp><span class="samp">%1</span></samp>&rsquo; is a synonym for &lsquo;<samp><span class="samp">fg %1</span></samp>&rsquo;, bringing job 1 from the
background into the foreground.  Similarly, &lsquo;<samp><span class="samp">%1 &amp;</span></samp>&rsquo; resumes
job 1 in the background, equivalent to &lsquo;<samp><span class="samp">bg %1</span></samp>&rsquo;

   <p>The shell learns immediately whenever a job changes state. 
Normally, Bash waits until it is about to print a prompt
before reporting changes in a job's status so as to not interrupt
any other output. 
If the <samp><span class="option">-b</span></samp> option to the <code>set</code> builtin is enabled,
Bash reports such changes immediately (see <a href="The-Set-Builtin.html#The-Set-Builtin">The Set Builtin</a>). 
Any trap on <code>SIGCHLD</code> is executed for each child process
that exits.

   <p>If an attempt to exit Bash is made while jobs are stopped, (or running, if
the <code>checkjobs</code> option is enabled &ndash; see <a href="The-Shopt-Builtin.html#The-Shopt-Builtin">The Shopt Builtin</a>), the
shell prints a warning message, and if the <code>checkjobs</code> option is
enabled, lists the jobs and their statuses. 
The <code>jobs</code> command may then be used to inspect their status. 
If a second attempt to exit is made without an intervening command,
Bash does not print another warning, and any stopped jobs are terminated.

   </body></html>

