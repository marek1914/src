<html lang="en">
<head>
<title>Shell Functions - Bash Reference Manual</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Bash Reference Manual">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Basic-Shell-Features.html#Basic-Shell-Features" title="Basic Shell Features">
<link rel="prev" href="Shell-Commands.html#Shell-Commands" title="Shell Commands">
<link rel="next" href="Shell-Parameters.html#Shell-Parameters" title="Shell Parameters">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This text is a brief description of the features that are present in
the Bash shell (version 4.1, 23 December 2009).

This is Edition 4.1, last updated 23 December 2009,
of `The GNU Bash Reference Manual',
for `Bash', Version 4.1.

Copyright (C) 1988--2009 Free Software Foundation, Inc.

Permission is granted to make and distribute verbatim copies of
this manual provided the copyright notice and this permission notice
are preserved on all copies.

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; with no Invariant Sections, with the Front-Cover texts
     being ``A GNU Manual'', and with the Back-Cover Texts as in (a)
     below.  A copy of the license is included in the section entitled
     ``GNU Free Documentation License''.

     (a) The FSF's Back-Cover Text is: You are free to copy and modify
     this GNU manual.  Buying copies from GNU Press supports the FSF in
     developing GNU and promoting software freedom.''

   -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Shell-Functions"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Shell-Parameters.html#Shell-Parameters">Shell Parameters</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Shell-Commands.html#Shell-Commands">Shell Commands</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Basic-Shell-Features.html#Basic-Shell-Features">Basic Shell Features</a>
<hr>
</div>

<h3 class="section">3.3 Shell Functions</h3>

<p><a name="index-shell-function-63"></a><a name="index-functions_002c-shell-64"></a>
Shell functions are a way to group commands for later execution
using a single name for the group.  They are executed just like
a "regular" command. 
When the name of a shell function is used as a simple command name,
the list of commands associated with that function name is executed. 
Shell functions are executed in the current
shell context; no new process is created to interpret them.

   <p>Functions are declared using this syntax:
<a name="index-function-65"></a>
<pre class="example">     [ <code>function</code> ] <var>name</var> () <var>compound-command</var> [ <var>redirections</var> ]
</pre>
   <p>This defines a shell function named <var>name</var>.  The reserved
word <code>function</code> is optional. 
If the <code>function</code> reserved
word is supplied, the parentheses are optional. 
The <var>body</var> of the function is the compound command
<var>compound-command</var> (see <a href="Compound-Commands.html#Compound-Commands">Compound Commands</a>). 
That command is usually a <var>list</var> enclosed between { and }, but
may be any compound command listed above. 
<var>compound-command</var> is executed whenever <var>name</var> is specified as the
name of a command. 
Any redirections (see <a href="Redirections.html#Redirections">Redirections</a>) associated with the shell function
are performed when the function is executed.

   <p>A function definition may be deleted using the <samp><span class="option">-f</span></samp> option to the
<code>unset</code> builtin (see <a href="Bourne-Shell-Builtins.html#Bourne-Shell-Builtins">Bourne Shell Builtins</a>).

   <p>The exit status of a function definition is zero unless a syntax error
occurs or a readonly function with the same name already exists. 
When executed, the exit status of a function is the exit status of the
last command executed in the body.

   <p>Note that for historical reasons, in the most common usage the curly braces
that surround the body of the function must be separated from the body by
<code>blank</code>s or newlines. 
This is because the braces are reserved words and are only recognized
as such when they are separated from the command list
by whitespace or another shell metacharacter. 
Also, when using the braces, the <var>list</var> must be terminated by a semicolon,
a &lsquo;<samp><span class="samp">&amp;</span></samp>&rsquo;, or a newline.

   <p>When a function is executed, the arguments to the
function become the positional parameters
during its execution (see <a href="Positional-Parameters.html#Positional-Parameters">Positional Parameters</a>). 
The special parameter &lsquo;<samp><span class="samp">#</span></samp>&rsquo; that expands to the number of
positional parameters is updated to reflect the change. 
Special parameter <code>0</code> is unchanged. 
The first element of the <samp><span class="env">FUNCNAME</span></samp> variable is set to the
name of the function while the function is executing.

   <p>All other aspects of the shell execution
environment are identical between a function and its caller
with these exceptions:
the <samp><span class="env">DEBUG</span></samp> and <samp><span class="env">RETURN</span></samp> traps
are not inherited unless the function has been given the
<code>trace</code> attribute using the <code>declare</code> builtin or
the <code>-o functrace</code> option has been enabled with
the <code>set</code> builtin,
(in which case all functions inherit the <samp><span class="env">DEBUG</span></samp> and <samp><span class="env">RETURN</span></samp> traps),
and the <samp><span class="env">ERR</span></samp> trap is not inherited unless the <code>-o errtrace</code>
shell option has been enabled. 
See <a href="Bourne-Shell-Builtins.html#Bourne-Shell-Builtins">Bourne Shell Builtins</a>, for the description of the
<code>trap</code> builtin.

   <p>If the builtin command <code>return</code>
is executed in a function, the function completes and
execution resumes with the next command after the function
call. 
Any command associated with the <code>RETURN</code> trap is executed
before execution resumes. 
When a function completes, the values of the
positional parameters and the special parameter &lsquo;<samp><span class="samp">#</span></samp>&rsquo;
are restored to the values they had prior to the function's
execution.  If a numeric argument is given to <code>return</code>,
that is the function's return status; otherwise the function's
return status is the exit status of the last command executed
before the <code>return</code>.

   <p>Variables local to the function may be declared with the
<code>local</code> builtin.  These variables are visible only to
the function and the commands it invokes.

   <p>Function names and definitions may be listed with the
<samp><span class="option">-f</span></samp> option to the <code>declare</code> or <code>typeset</code>
builtin commands (see <a href="Bash-Builtins.html#Bash-Builtins">Bash Builtins</a>). 
The <samp><span class="option">-F</span></samp> option to <code>declare</code> or <code>typeset</code>
will list the function names only
(and optionally the source file and line number, if the <code>extdebug</code>
shell option is enabled). 
Functions may be exported so that subshells
automatically have them defined with the
<samp><span class="option">-f</span></samp> option to the <code>export</code> builtin
(see <a href="Bourne-Shell-Builtins.html#Bourne-Shell-Builtins">Bourne Shell Builtins</a>). 
Note that shell functions and variables with the same name may result
in multiple identically-named entries in the environment passed to the
shell's children. 
Care should be taken in cases where this may cause a problem.

   <p>Functions may be recursive.  No limit is placed on the number of
recursive  calls.

   </body></html>

