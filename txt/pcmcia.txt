CF: CompactFlash

测得工作电压 3.3V

用64pin(大概50个io)，可考虑48pin(大概36个io)
就用64pin，稍微富裕些，用的时候省得捉襟见肘


用不了那么多引脚，虽然A0-A10 其实高位地址是固定的，需要重新考虑64引脚甚至48引脚

检测信号采样得能达到 16M

测试一下 f1 和 f4 的 io口性能再说
mcu选型 
F103R    72MHz
F410/1R  100MHz
F405R    168MHz(F4 168MHz 的没有48pin的，最少64pin) 有卖 25元，已经买过了

F410CB   100MHz  48pin 没有卖的

按右下角2个按键上电，进入开机模式，选第7项

注意，pcmcia的封装， 1 35 2 36 3 37 4 38

pcmcia:
http://ww38.pcmcia.org/pccard.htm

原装正品FANUC发那科系统CF卡槽 A66L-2050-0025A#B CNC 卡座插口 这个有卖

数据备份过程大概5s，采集数据8s即可

CF:
cd1 cd2 引脚短
VCC GND 引脚长

pcmcia to cf 的对应关系
http://www.synchrotech.com/support/faq-compact_flash_memory_cards.html

http://pinouts.ru/Slots/PcCard_pinout.shtml


a0-a10 都有信号，说明不是 true ide 模式， 
2k地址空间

没操作CF卡时， a1，a2 有周期信号, 

WAIT 是 是输出信号（相对于ca卡来说）没有抓到信号，一直是高电平

重要实验结果：
开始就把wait信号强制接地，提示 Memory card mount error
当开始读取数据的时候，再接地，发现读取速度明显变慢
说明我可以通过控制wait信号 调节速度！



Memory Mode 和 I/O Mode 区别： 还没有明白真正的本质区别在哪里
引脚定义上，仅 24 37 45 46  四个引脚不同

Pin43 -INPACK  测得有信号，而 Memory Mode 不用这个信号，这更加证明是 I/O 模式
Pin34 -IORD  Memory模式不用，I/O 用 
Pin35 -IOWR  Memory模式不用，I/O 用

IORD IOWR 都测到了信号，

向卡里写数据时，IORD信号比较稀疏

没操作CF卡时， a1，a2 有周期信号

-REG:
Memory Mode: High- Common Memory, Low- Register(Attribute 属性) Memory.
I/O Mode : Low during I/O Cycles when the I/O address is on the Bus(也就是说 没啥用)

发现 IORD / IOWD 为低的时候， REG 都为低（对了）


CF卡 addr 11 + data 16  VCC/GND 4   控制信号19条 

换一个思路：
检测到有文件，就删除，单片机去删除，前提是实现FAT文件系统


用 SN74LVC244A 会不会因为延迟 导致数据错位？   3.3V  最大 6ns 典型 3.9ns
http://www.ti.com/logic-circuit/buffer-driver-transceiver/non-inverting-buffer-driver/products.html 总有一款适合

SN74LVC244A  8bit 5.9ns  不是最好的选择
SN74ALB16244  Tpd Max:  2ns  很贵 10+
SN74AVC16244  Tpd Max:  3.3ns 4.5+   (备选)

SN74LVT244B  8bit 3.5ns  1元 (备选)

1片 16bit 不够   data 8个 ， 地址 3个 cs1 cs2 iowr iord 共 7 条 + reset  好像刚刚好。。。。

-------------------
F401-nuclear  84MHz
设置 GPIO_SPEED_FREQ_LOW   全速设置IO  3.38MHz
设置 GPIO_SPEED_FREQ_VERY_HIGH  还是3.38MHz  
这个参数好像没起作用
编译器选时间优化 optimize for time  3.85MHz

直接操作 BSRR 寄存器, 9.4MHz
while (1) {
	*((unsigned int*)0x40020018) = 0x01000000;
	*((unsigned int*)0x40020018) = 0x00000100;	
}
展开若干遍 21MHz

波形不好 上下冲严重，这是因为没有负载，阻抗不匹配
