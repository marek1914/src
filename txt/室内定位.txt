palmap

目前蓝牙 iBeacon 定位的方式主要有两种：基于 RSSI（接收信号强度指示）和基于定位指纹，或者两者结合。基于距离最大的问题在于，室内环境复杂，而蓝牙作为2.4GHZ高频信号，会受到很大的干扰。加上室内的各种反射折射，手机所获取的 RSSI 值并没有太大的参考价值；而与此同时，为了提高定位精度，就不得不对 RSSI 值进行多次获取来平滑结果，这就意味着时延的增加。

而基于定位指纹的最大问题在于，前期获取指纹数据的人力成本和时间成本非常高，数据库维护困难。而且如果商场增添了新的基站，或者进行了其他改造，原始的指纹数据可能就不再适用。所以，如何在定位精度、延时和成本之间进行权衡和取舍，就成了蓝牙定位的核心的问题。目前，市场上主流的蓝牙定位精度是70%的地段在2米以内，部分公司可以做到90%的地段在2米以内。

目前市场上主流的蓝牙定位技术都是基于三角定位算法，通过手机获取周围蓝牙基站的信号强度，再通过其他的一些辅助方法比如加权平均算法，时间加权算法，惯性导航算法，卡尔曼滤波算法，高斯滤波算法等来计算出当前位置，如图所示：

图聚的蓝牙定位引擎系统主要包括硬件：蓝牙Beacon、蓝牙Beacon管理设备、服务器，及软件：地图引擎、蓝牙定位引擎、后台管理系统所组成。

作者：palmap
链接：https://www.zhihu.com/question/56849614/answer/150647001
来源：知乎
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。

硬件组成蓝牙 Beacon – Beacon 是指支持蓝牙4.0的低功耗设备。通过广播蓝牙信号，它可用于地理围栏和室内定位功能。Beacon 硬件因为成本低、功耗小、工作时间长、易于部署，目前主要用于室内定位，具有广泛的应用前景。用户终端扫描定位 Beacon 的信号，经过定位引擎处理可以计算出用户当前的位置。蓝牙 Beacon 管理设备 – 有时又称为蓝牙网关，是与 Beacon 配套的管理设备。蓝牙网关可以接收 Beacon 发射的信号，与 Beacon 进行蓝牙连接，并通过有线或无线的方式与后台服务器相连，实现实时监测 Beacon 工作状态和管理 Beacon 的功能。本系统蓝牙网关承担两部分功能：实时监测定位 Beacon 的工作状态，支持配置修改定位 Beacon 的工作参数。定位蓝牙终端。蓝牙网关可以扫描蓝牙手机发出的信号，多个网关收集到的蓝牙信号汇总到服务器，可以计算出设备的位置和轨迹，实现自动定位的功能。服务器 – 后台服务器为常规硬件，主要承载 Beacon 管理后台，以及地图导航等服务。软件组成地图引擎 – 是软件组成体系中的基础。主要功能分为信息检索及展示和定位导航支持两部分：信息展示与检索：展示室内地图、定位结果和导航路径；检索附近公共设施（如出口、电梯）。定位导航支持：定位系统的坐标系统是建立在地图引擎之上的，同时导航功 能是通过地图引擎的后台导航服务实现的。蓝牙定位引擎 – 获取用户实时位置。用户终端扫描周围Beacon发出的信号，利用三角定位算法可以计算出用户当前位置。此外，蓝牙定位引擎还包括智能分析模块，用于区分用户静止、行走和行车的不同状态。后台管理系统 – 主要指Beacon管理后台，支持Beacon信息的可视化管理。后台管理系统可以通过蓝牙网关监测Beacon工作状态，并可以实时修改 Beacon工作参数，以保证蓝牙定位系统的正常运作。

地图引擎图聚是全球最大的室内地图服务商，始终致力于提供购物餐饮、休闲娱乐、 交通设施、医疗教育等多种大型场所的室内地图服务，拥有业内领先的自主研发室 内地图引擎。蓝牙定位技术图聚自主研发的蓝牙定位算法具有定位精度高、定位延迟低、设备成本低等 优势。目前，室内场景下，终端定位精度可以达到60%〜70%在2米以内，80% 以上在3米以内，定位延迟1〜2s。惯性导航算法利用手机内置多种传感器，通过惯性导航算法可以检测出用户的运动状态，如用户是否静止、行车、行走，用户的朝向等，对用户不同的运动状态给定位结果进行针对性地处理，提高用户体验。精准Beacon信息推送利用后台的精确数据分析，可以对获取的消费者数据进行时间，空间，喜好，活跃度等多维度的分析，构建更加完整的消费者肖像，从而针对消费者进行更加精准的信息推送导航算法图聚自主研发的地图引擎和导航算法，支持对信息的定制化显示，业内领先的导航算法可以快速精准地找出最优路径和最近设施。

